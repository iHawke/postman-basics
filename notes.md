# Introduction to Postman course notes

## Session 1 - Postman Basics

### Lesson 1 - What is Postman?

#### ðŸ’¡ - Summary
- API stands for "Application Programming Interfaces."
- Postman is a tool that mimics a web-browser and allows us to easily work with APIs.
- Postman is used to build HTTP requests that we send to the web-server running the APIs.

### Lesson 2 - How to install Postman

#### ðŸ’¡ - Summary
- There are two ways to run Postman: 
   * As a standalone app or 
   * Directly in the browser
- The standalone app is available for Windows, macOS, and Linux.
- Postman on the web works from any browser. You'll also need the Postman desktop agent in order to use the browser based version.  
  DO NOT use the Google Chrome extension as this is deprecated and no longer updated.

#### ðŸ“š - Resources

* [Download Postman App](https://www.postman.com/downloads/)
* [Open Postman on the web](https://go.postman.co/build)
* [Postman Desktop Agent (scroll down)](https://www.postman.com/downloads/)

### Lesson 3 - Your first request with Postman

#### ðŸ’¡ - Summary

- To use an API you need to read the API documentation first: [Simple Books API documentation](./api.md)
- Work in Postman is organized in Workspaces & Collections.  A collection is like a "folder" where you keep all your API calls.
- Server responses always contains a status code. Some commonly used ones are:

| Code | Desc                  |
|------|-----------------------| 
| 200  | OK                    |
| 201  | Created               |
| 202  | Accepted              |
| 301  | Moved                 |
| 4xx  | Client error          |
| 400  | Bad request           |
| 401  | Unauthorized          |
| 404  | Not found             |
| 5xx  | Server error          |
| 500  | Internal Server error |
| 502  | Bad gateway           |

### Lesson 4 - HTTP

#### ðŸ’¡ - Summary

- How HTTP works?
```shell
   telnet https://simple-books-api.glitch.me 80
   GET / HTTP/1.1
```  
- The API we are using the HTTPS protocol.
- HTTPS stands for Secured HTTP where connection is encrypted.
- All APIs should use HTTPS.
- From our point of view HTTP and HTTPS are the same.
- The HTTP request message will contain: 
   * URL (address)
   * Request method (GET, POST, PUT, ...)
   * Headers (User-Agent: Postman)
   * Body
- The HTTP response message will contain: 
   * Status code (200, 404, 500, ...)
   * Headers
   * Body

### Lesson 5 - Postman: First API call, collections & variables

#### ðŸ’¡ - Summary
- Save requests to re-use them later.
- All requests need to be organized in Postman collection (a folder.)
- We are storing the base address of the API in a collection variable called `baseUrl`. 
- Our saved baseUrl will be displayed as `{{baseUrl}}` in the address bar.
- Variables allow us to avoid repeating the same information.
- Variables allow us to easily make changes.
- A Postman variable has two states:
   * INITIAL VALUE - This will be available to others if you share the collection.
   * CURRENT VALUE - This is private to you and not shared.

### Lesson 6 - POST request / API Authentication

#### ðŸ’¡ - Summary
- A `POST` request allows you to send data in the request body.
- For simple-book-api, some APIs/endpoints are public and some require no authentication.  But we're treating them as they all need authentication.
- An access token is temporary password generated by the API.
- To send JSON, select the POST request method and from the Body select `Raw` and from the list `JSON`.


### Lesson 7 - Query parameters

#### ðŸ’¡ - Summary
- JSON is the most popular format that APIs use to send data.
- Query parameters start after the `?` in the URL.
   * example : `{{baseUrl}}/books?type=fiction`
- The format is `key=value`
- Multiple query parameters are seperated with an `&`. 
   * example: `foo=1&bar=2`
- Depending on the API, some query parameters can be optional or mandatory.
- You can enable and disable parameters by clicking the checkbox associated with each key-value pair.

### Homework
- Study the API documentation and use the `limit` query parameter in the `/books` endpoint.
- Try out different values for `limit`.
- Can you make the API return a status code 400?


### Lesson 8 - Path variables

#### ðŸ’¡ - Summary
- `:bookId` is a path variable in the URL.
- This endpoint allows us to specify a value that changes all the time, depending on the book.
- `:bookId` is just a placeholder and does not get sent.
- You can use path variables in combination with query parameters (if the API accepts this).


### Lesson 9 - JSON format

#### ðŸ’¡ - Summary
- You need to specify valid JSON, otherwise the server won't understand your request.
- Use double-quotes `""` for strings, separate key-value pairs with a comma sign `,`
- Numbers, booleans don't need to be between quotes.
- Postman will indicate when your JSON is invalid.


### Homework:
- Create the POST request to order a book.
- Try ordering a book that is not in stock.

### Lesson 10 - Random test data

#### ðŸ’¡ - Summary
- You can use a special type of Postman variable to generate random data
   * example: `{{$randomFullName}}`
- To inspect the request body you can use the Postman console.

#### ðŸ“š - Resources

* [Dynamic variables in Postman](https://postman-quick-reference-guide.readthedocs.io/en/latest/dynamic-variables.html)

### Lesson 11 - Is Postman the right tool for me?

#### ðŸ’¡ - Summary
- Postman is a tool for dealing with APIs.
- Postman cannot work with User Interactions, such as: click buttons & fill out forms etc.
- Postman is not a performance testing tool.
- Postman can be used for security testing but has not been designed for this purpose.

### Lesson 12 - Viewing existing orders & REST behavior

#### ðŸ’¡ - Summary
- Using the GET request method on the `orders` endpoint will give us a list of orders.
- Using the POST request method on the same endpoint will let us create a new order.

### Homework

- Look at the API documentation and identify the endpoint that would allow you to see a single order.

### Lesson 13 - PATCH request

#### ðŸ’¡ - Summary
- A `PATCH` request is typically used for updating existing data.
- A `PATCH` usually does a partial update, by changing only some of the properties.

### Lesson 14 - DELETE request

#### ðŸ’¡ - Summary
- A `DELETE` request is used for deleting data.
- If you try to get the same data with a `GET` request, you will get a `404 Not Found` status code.

## Session 2 - Test automation with Postman

### Lesson 15 - Introduction to test automation

#### ðŸ’¡ - Summary

- How to add `test scripts` after an API call?
- Tests in Postman are written in JavaScript.
- Tests are executed ONLY after the response has arrived from the API.
- Testing the response status code is one of the easiest tests you can write.
- Can a script checks for us the things we would check manually as a tester?

### Lesson 16 - Your first API tests

#### ðŸ’¡ - Summary
- We are looking at the response to understand if the API is working properly.
- With API tests we want to avoid manually re-testing the API.
- Postman uses an assertion library called Chai.js
- When writing tests, we want to make sure the tests fail.
- To make the assertions on a JSON response, you first need to parse it.
- To see the contents of a JavaScript variable you can use `console.log()`
- To get a property of an object, you can use this syntax: `someobject.someproperty`
   * alternative syntax: `someobject["someproperty"]`

#### ðŸ“š - Resources

* [Chai Assertion Library](https://www.chaijs.com/api/bdd/)

### Homework
- Add tests for all the requests in the collection that verify the status code.

### Lesson 17 - Postman variables

#### ðŸ’¡ - Summary 
- Postman variables are fundamental to automating testing of the API.
- Postman environments (environment variables) are good if you have multiple testing environments (Local, QA, PROD)
- Postman collection variables are saved in the collection.
- Postman global variables are available to all collection in a workspace.
- We use Postman global variables as the data we save is not that important after the execution has stopped.

### Lesson 18 - Extracting data from the response

#### ðŸ’¡ - Summary

- Having hardcoded values in requests can make the API tests fail if the data changes.
- We are using the filter function available on all arrays to remove the books that are not available.
- Always use `console.log()` to view the data you are trying to set as a variable.

#### ðŸ“š - Resources

* [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)

### Homework
- Test that the book extracted from the response is of type `non-fiction`
- Ensure that the test fails.
- Use the Postman global variable `bookId` in the requests "Get single book" and "Order book".
- Write a test that verifies the stock is >0
   * use this assertion as a starting point: `pm.expect(1).to.be.above(2)`

### Lesson 19 - Collection runner

#### ðŸ’¡ - Summary

- The Collection runner is a built-in functionality of Postman.
- The Collection runner allows you to execute the entire collection with just one click.
- Make sure to check (:white_check_mark:) the "Save response" box as this will allow you to inspect the response body.
- You can re-order the APIs simply by dragging them around.

### Lesson 20 - Postman monitors

#### ðŸ’¡ - Summary
- Creating a Postman monitor ensures that you can run a Postman collection according to a pre-defined schedule.
- Running the collection will be handled by Postman on their infrastructure, you don't need to keep Postman open.
- If you are not familiar with continuous integration servers like Jenkins, GitLab CI or TeamCity, this is a quick and easy way to access a Postman collection.
- The API needs to be accessible from any network.

### Lesson 21 - Newman

#### ðŸ’¡ - Summary
- Newman is a CLI tool that can take a Postman collection, run all the tests and generate a report at the end.
- Newman does not have an interface, you need to work with it from the terminal.
- Often Newman is installed on an integration server like Jenkins, GitLab CI or TeamCity.
- To run Newman on your computer, you need to have Node.js installed.
   * you can download Node.js from https://nodejs.org/ (download the LTS version)
- To install newman, run the command: `npm install -g newman`
- Check if newman is install with: `newman --version`
- There are three ways to access a collection from Newman:
   * Export the collection as a JSON file.
   * Share with a public link.
   * Use the Postman API to get the collection.


#### ðŸ“š - Resources

* [Postman API](https://documenter.getpostman.com/view/631643/JsLs/?version=latest)
* [Newman Support](https://learning.postman.com/docs/running-collections/using-newman-cli/command-line-integration-with-newman/)

### Lesson 22 - HTML reports with Newman

#### ðŸ’¡ - Summary
- html-extra is the most popular reporter in the Postman community.  It can be found here:
[htmlextra reporter](https://www.npmjs.com/package/newman-reporter-htmlextra)


### Lesson 23 - CI/CD overview

#### ðŸ’¡ - Summary
- CI/CD is becoming an industry standard now.
- Between CI/CD steps, various tests are run and based on result the CI/CD process stops or continues.
- Newman is the missing `CLI` for Postman.  Newman is particularly useful when you integrate it with a CI server.
